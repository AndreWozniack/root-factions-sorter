# ğŸŒ Sistema de InternacionalizaÃ§Ã£o (i18n)

## ğŸ“ Estrutura

```
app/
â”œâ”€â”€ models/
â”‚   â””â”€â”€ i18n.ts              â† TraduÃ§Ãµes e configuraÃ§Ã£o
â”œâ”€â”€ hooks/
â”‚   â””â”€â”€ useLanguage.ts       â† Gerenciamento de idioma
â””â”€â”€ components/
    â””â”€â”€ LanguageSelector.tsx â† Seletor de idioma com bandeiras
```

---

## ğŸ¯ Como Funciona

### **1. MODEL - TraduÃ§Ãµes** (`app/models/i18n.ts`)

Define os idiomas suportados e todas as traduÃ§Ãµes:

```typescript
export type Language = "pt-BR" | "en-US" | "es-ES";

export interface Translation {
  title: string;
  subtitle: string;
  // ... todos os textos da aplicaÃ§Ã£o
}

export const translations: Record<Language, Translation> = {
  "pt-BR": { title: "Sorteador de FacÃ§Ãµes", ... },
  "en-US": { title: "Faction Sorter", ... },
  "es-ES": { title: "Sorteo de Facciones", ... },
};
```

### **2. CONTROLLER - Gerenciamento** (`app/hooks/useLanguage.ts`)

Hook que gerencia o idioma atual:

```typescript
const { language, setLanguage, t } = useLanguage();

// language: idioma atual ("pt-BR", "en-US", "es-ES")
// setLanguage: funÃ§Ã£o para mudar o idioma
// t: objeto com todas as traduÃ§Ãµes do idioma atual
```

**Recursos:**

- Salva idioma no `localStorage`
- Carrega automaticamente na prÃ³xima visita
- Idioma padrÃ£o: PortuguÃªs (pt-BR)

### **3. VIEW - Seletor** (`app/components/LanguageSelector.tsx`)

Componente visual com dropdown de idiomas:

```typescript
<LanguageSelector currentLanguage={language} onLanguageChange={setLanguage} />
```

**CaracterÃ­sticas:**

- Bandeiras emoji para cada idioma
- Dropdown elegante
- Indicador visual do idioma selecionado
- Fecha ao clicar fora

---

## ğŸš€ Como Usar nos Componentes

### **1. Importar o hook no componente pai**

```typescript
// page.tsx
import { useLanguage } from "./hooks/useLanguage";

const { language, setLanguage, t } = useLanguage();
```

### **2. Passar traduÃ§Ãµes para componentes filhos**

```typescript
<Header t={t} />
<PlayerInput value={value} onChange={onChange} t={t} />
```

### **3. Usar traduÃ§Ãµes no componente**

```typescript
// Header.tsx
interface HeaderProps {
  t: Translation;
}

export default function Header({ t }: HeaderProps) {
  return <h1>{t.title}</h1>; // â† Texto traduzido
}
```

---

## â• Adicionar Novo Idioma

### **Passo 1: Adicionar tipo**

```typescript
// app/models/i18n.ts
export type Language = "pt-BR" | "en-US" | "es-ES" | "fr-FR"; // â† Adicione aqui
```

### **Passo 2: Adicionar traduÃ§Ãµes**

```typescript
export const translations: Record<Language, Translation> = {
  // ... idiomas existentes
  "fr-FR": {
    title: "Tireur de Factions de Root",
    subtitle: "Entrez un nom/faction par ligne...",
    // ... complete todas as chaves
  },
};
```

### **Passo 3: Adicionar nome e bandeira**

```typescript
export const languageNames: Record<Language, string> = {
  // ... existentes
  "fr-FR": "FranÃ§ais",
};

export const languageFlags: Record<Language, string> = {
  // ... existentes
  "fr-FR": "ğŸ‡«ğŸ‡·",
};
```

---

## âœï¸ Adicionar Nova TraduÃ§Ã£o

### **Passo 1: Adicionar Ã  interface**

```typescript
// app/models/i18n.ts
export interface Translation {
  // ... existentes
  newKey: string; // â† Nova chave
}
```

### **Passo 2: Adicionar em todos os idiomas**

```typescript
export const translations: Record<Language, Translation> = {
  "pt-BR": {
    // ... existentes
    newKey: "Novo texto em portuguÃªs",
  },
  "en-US": {
    // ... existentes
    newKey: "New text in English",
  },
  "es-ES": {
    // ... existentes
    newKey: "Nuevo texto en espaÃ±ol",
  },
};
```

### **Passo 3: Usar no componente**

```typescript
<div>{t.newKey}</div>
```

---

## ğŸ”„ TraduÃ§Ã£o com VariÃ¡veis

Para textos com valores dinÃ¢micos, use `replace()`:

```typescript
// DefiniÃ§Ã£o
invalidDrawMessage: "Recomendado para {count} jogadores";

// Uso
{
  t.invalidDrawMessage.replace("{count}", numPlayers.toString());
}
```

---

## ğŸ“‹ Idiomas Suportados

| CÃ³digo  | Idioma             | Bandeira | Status      |
| ------- | ------------------ | -------- | ----------- |
| `pt-BR` | PortuguÃªs (Brasil) | ğŸ‡§ğŸ‡·       | âœ… Completo |
| `en-US` | English (US)       | ğŸ‡ºğŸ‡¸       | âœ… Completo |
| `es-ES` | EspaÃ±ol (EspaÃ±a)   | ğŸ‡ªğŸ‡¸       | âœ… Completo |

---

## ğŸ¨ PersonalizaÃ§Ã£o do Seletor

### Mudar posiÃ§Ã£o

```typescript
// page.tsx
<div style={{ display: "flex", justifyContent: "flex-start" }}> // â† esquerda
  <LanguageSelector ... />
</div>
```

### Mudar estilo

Edite `app/components/LanguageSelector.tsx`:

```typescript
style={{
  backgroundColor: "sua-cor",
  borderRadius: "seu-valor",
  // ... seus estilos
}}
```

---

## ğŸ§ª Testando TraduÃ§Ãµes

1. Abra a aplicaÃ§Ã£o
2. Clique no seletor de idioma (canto superior direito)
3. Selecione um idioma
4. Verifique se todos os textos mudaram
5. Recarregue a pÃ¡gina â†’ idioma deve permanecer

---

## âœ… Checklist de Boas PrÃ¡ticas

- [x] Todas as strings da UI estÃ£o em `i18n.ts`
- [x] Nenhum texto hardcoded nos componentes
- [x] Interface `Translation` tipada corretamente
- [x] Todos os idiomas tÃªm as mesmas chaves
- [x] Idioma salvo no localStorage
- [x] Fallback para idioma padrÃ£o
- [x] Componentes recebem `t` via props

---

## ğŸ” Estrutura Completa de TraduÃ§Ãµes

```typescript
interface Translation {
  // HEADER
  title: string; // TÃ­tulo principal
  subtitle: string; // SubtÃ­tulo

  // FACTION REFERENCE
  factionReference: string; // TÃ­tulo da tabela
  minReachByPlayers: string; // "Alcance mÃ­nimo por jogadores"
  players: string; // "jogadores"

  // PLAYER INPUT
  playersLabel: string; // "Jogadores"
  playersPlaceholder: string; // Placeholder do textarea

  // FACTION SELECTOR
  factionsAvailable: string; // "FacÃ§Ãµes DisponÃ­veis"
  selectAll: string; // "Todas"
  selectNone: string; // "Nenhuma"
  factionsSelected: string; // "facÃ§Ã£o(Ãµes) selecionada(s)"

  // SHUFFLE BUTTON
  shuffleButton: string; // "Embaralhar e Sortear!"
  shuffling: string; // "Sorteando..."

  // COUNTDOWN
  preparingDraw: string; // "Preparando o sorteio..."

  // RESULTS
  resultsTitle: string; // "Resultados do Sorteio"
  validDraw: string; // "Sorteio VÃ¡lido!"
  invalidDraw: string; // "Sorteio InvÃ¡lido"
  totalReach: string; // "Alcance Total"
  minRecommended: string; // "MÃ­nimo Recomendado"
  invalidDrawMessage: string; // Mensagem de erro
}
```

---

## ğŸš€ Exemplo Completo de Uso

```typescript
// page.tsx
import { useLanguage } from "./hooks/useLanguage";
import { LanguageSelector, Header } from "./components";

export default function Page() {
  const { language, setLanguage, t } = useLanguage();

  return (
    <div>
      {/* Seletor no topo */}
      <LanguageSelector
        currentLanguage={language}
        onLanguageChange={setLanguage}
      />

      {/* Componentes recebem t */}
      <Header t={t} />
      <PlayerInput t={t} ... />
      <Results t={t} ... />
    </div>
  );
}
```

---

## ğŸ“š ReferÃªncias

- Arquivo principal: [app/models/i18n.ts](app/models/i18n.ts)
- Hook de controle: [app/hooks/useLanguage.ts](app/hooks/useLanguage.ts)
- Componente visual: [app/components/LanguageSelector.tsx](app/components/LanguageSelector.tsx)
